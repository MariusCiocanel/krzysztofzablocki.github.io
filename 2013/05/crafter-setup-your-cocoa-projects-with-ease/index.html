<!DOCTYPE HTML> <html> <head> <meta charset="utf-8"> <title>Crafter - setup your Cocoa projects with ease - Krzysztof Zabłocki</title> <meta name="author" content="Krzysztof Zabłocki"> <meta name=”twitter:site” content=”@merowing_> <meta name="description" content="Crafter - setup your Cocoa projects with ease How do you setup your Cocoa projects? Do you always set same warnings, clone configurations and do &hellip;"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link href="/atom.xml" rel="alternate" title="Krzysztof Zabłocki" type="application/atom+xml"> <link rel="canonical" href="http://krzysztofzablocki.github.com/krzysztofzablocki/2013/05/crafter-setup-your-cocoa-projects-with-ease"> <link href="/favicon.png" rel="shortcut icon"> <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css"> <link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css"> <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--> <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'> <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> <style type="text/css">
  .fancybox-wrap { position: fixed !important; }
  .fancybox-opened {
    -webkit-border-radius: 4px !important;
       -moz-border-radius: 4px !important;
            border-radius: 4px !important;
  }
  .fancybox-close, .fancybox-prev span, .fancybox-next span {
    background-color: transparent !important;
    border: 0 !important;
  }
</style> <script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-29400340-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();

		$('a').click(function() { 
			var $a = $(this); var href = $a.attr('href');
			// see if the link is external 
			if ( (href.match(/^http/)) && (! href.match(document.domain)) ) {

			// if so, register an event
			var category = 'outgoing'; // set this to whatever you want
			var event = 'click'; // set this to whatever you want
			var label = href; // set this to whatever you want
			pageTracker._trackEvent(category, event, href);
			}});
	</script> </head> <body> <div class="container"> <div class="left-col"> <div class="intrude-less"> <header id="header" class="inner"><div class="profilepic"> <script src="/javascripts/md5.js"></script> <script type="text/javascript">
		$(function(){
			$('.profilepic').append("<a href='http://twitter.com/merowing_'><img src='http://www.gravatar.com/avatar/" + MD5("krzysztof.zablocki@pixle.pl") + "?s=120' alt='Profile Picture' style='width: 120px; float: left; margin: 0px 15px 15px 0px;' /></a> <div class='header_bio'><a href='/about/''>Krzysztof Zabłocki - Software Engineer.</a></div>");
		});
	</script> </div> <nav id="main-nav"><ul class="main"> <br/> <br/> <div class="indie_apps" style="clear:both;"> <a href="http://appstore.com/foldify"><img class="app_poster" src="http://www.merowing.info/images/foldify.png" alt="Foldify"></a> <a href="http://appstore.com/foldifyzoo"><img class="app_poster" src="http://www.merowing.info/images/foldifyzoo.png" alt="Foldify Zoo"></a> <a href="http://appstore.com/foldifydino"><img class="app_poster" src="http://www.merowing.info/images/foldifydino.png" alt="Foldify Dino"></a> <a href="https://itunes.apple.com/us/app/storest-kids-love-playing/id926102013?mt=8"><img class="app_poster" src="http://www.merowing.info/images/storest.png" alt="Bord"></a> <a href="http://appstore.com/bord"><img class="app_poster" src="http://www.merowing.info/images/bord.png" alt="Storest"></a> <br/> <br/> </div> <li><a href="/about">About me</a></li> <li><a href="/speaking">Speaking</a></li> <li><a href="/">Blog</a></li> <li><a href="/blog/archives">Archives</a></li> </ul> </nav> <nav id="popular"> <section> <h4>Recommended</h4> <li class="related"><a href="/2014/10/how-do-i-work/">How do I Work?</a></li> <li class="related"><a href="/2014/03/refactoring-tricks">Refactoring tricks</a> and <a href="/2014/02/ios-developer-tools">Developer Tools</a></li> <li class="related"><a href="/2012/04/drawing-smooth-lines-with-cocos2d-ios-inspired-by-paper">Drawing smooth lines</a></li> <li class="related"><a href="https://github.com/krzysztofzablocki/KZPropertyMapper">Data Parsing</a> and <a href="https://github.com/krzysztofzablocki/KZBootstrap">Project bootstrap</a></li> </section> </nav> <nav id="sub-nav"> <div class="social"> <a class="email" href="mailto:krzysztof.zablocki@pixle.pl" title="Email">Email</a> <a class="facebook" href="http://www.facebook.com/100000315956630" title="Facebook">Facebook</a> <a class="twitter" href="http://twitter.com/merowing_" title="Twitter">Twitter</a> <a class="github" href="https://github.com/krzysztofzablocki" title="GitHub">GitHub</a> <a class="linkedin" href="http://www.linkedin.com/profile/view?id=90077810" title="LinkedIn">LinkedIn</a> <a class="rss" href="/atom.xml" title="RSS">RSS</a> </div> </nav></header> </div> </div> <div class="mid-col"> <div class="mid-col-container"> <div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <h1 class="title" itemprop="name">Crafter - setup your Cocoa projects with ease</h1> <div class="entry-content" itemprop="articleBody"><p>How do you setup your Cocoa projects? Do you always set same warnings, clone configurations and do bunch of other stuff? Or maybe you work in a big company and you are missing some standardised setup?</p> <p>Programmers tend to automatise boring and repetitive tasks, yet I often see people spending time and time again configuring their Xcode Projects, even thought they always set it up same way.</p> <p>We all know that Xcode templating system is far from perfect, beside we often use different templates, but same level of warnings, scripts etc.</p> <p>What if you could define your project setup once (even with optional stuff) then just apply that to all your projects?</p> <h2>Enter crafter</h2> <p>That&#8217;s why I&#8217;ve created <strong>crafter</strong>, a ruby gem that you can install, setup your configuration once and enjoy hours of time saved.</p> <h3>So how does it work?</h3> <p>Install it by calling:</p> <div> <button class='toggle-code' title='show'>Show Code</button><figure class='code hide'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gem install crafter
</span><span class='line'>crafter reset
</span></code></pre></td></tr></table></div></figure> </div> <p>this will create your personal configuration file at <strong>~/.crafter.rb</strong></p> <p>now open that file with your favourite editor and you will see default configuration, along with description of different parts:</p> <div> <button class='toggle-code' title='show'>Show Code</button><figure class='code hide'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">load</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="ss">Crafter</span><span class="p">:</span><span class="ss">:ROOT</span><span class="si">}</span><span class="s2">/config/default_scripts.rb&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># All your configuration should happen inside configure block</span>
</span><span class='line'><span class="no">Crafter</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># This are projects wide instructions</span>
</span><span class='line'>  <span class="n">add_platform</span><span class="p">({</span><span class="ss">:platform</span> <span class="o">=&gt;</span> <span class="ss">:ios</span><span class="p">,</span> <span class="ss">:deployment</span> <span class="o">=&gt;</span> <span class="mi">6</span><span class="o">.</span><span class="mi">0</span><span class="p">})</span>
</span><span class='line'>  <span class="n">add_git_ignore</span>
</span><span class='line'>  <span class="n">duplicate_configurations</span><span class="p">({</span><span class="ss">:adhoc</span> <span class="o">=&gt;</span> <span class="ss">:debug</span><span class="p">,</span> <span class="ss">:profiling</span> <span class="o">=&gt;</span> <span class="ss">:debug</span><span class="p">})</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># set of options, warnings, static analyser and anything else normal xcode treats as build options</span>
</span><span class='line'>  <span class="n">set_options</span> <span class="sx">%w(</span>
</span><span class='line'><span class="sx">    GCC_WARN_INITIALIZER_NOT_FULLY_BRACKETED</span>
</span><span class='line'><span class="sx">    GCC_WARN_MISSING_PARENTHESES</span>
</span><span class='line'><span class="sx">    GCC_WARN_ABOUT_RETURN_TYPE</span>
</span><span class='line'><span class="sx">    GCC_WARN_SIGN_COMPARE</span>
</span><span class='line'><span class="sx">    GCC_WARN_CHECK_SWITCH_STATEMENTS</span>
</span><span class='line'><span class="sx">    GCC_WARN_UNUSED_FUNCTION</span>
</span><span class='line'><span class="sx">    GCC_WARN_UNUSED_LABEL</span>
</span><span class='line'><span class="sx">    GCC_WARN_UNUSED_VALUE</span>
</span><span class='line'><span class="sx">    GCC_WARN_UNUSED_VARIABLE</span>
</span><span class='line'><span class="sx">    GCC_WARN_SHADOW</span>
</span><span class='line'><span class="sx">    GCC_WARN_64_TO_32_BIT_CONVERSION</span>
</span><span class='line'><span class="sx">    GCC_WARN_ABOUT_MISSING_FIELD_INITIALIZERS</span>
</span><span class='line'><span class="sx">    GCC_WARN_UNDECLARED_SELECTOR</span>
</span><span class='line'><span class="sx">    GCC_WARN_TYPECHECK_CALLS_TO_PRINTF</span>
</span><span class='line'>
</span><span class='line'><span class="sx">    RUN_CLANG_STATIC_ANALYZER</span>
</span><span class='line'><span class="sx">    GCC_TREAT_WARNINGS_AS_ERRORS</span>
</span><span class='line'><span class="sx">  )</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># target specific options, :default is just a name for you, feel free to call it whatever you like</span>
</span><span class='line'>  <span class="n">with</span> <span class="ss">:default</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># each target have set of pods</span>
</span><span class='line'>    <span class="n">pods</span> <span class="o">&lt;&lt;</span> <span class="sx">%w(NSLogger-CocoaLumberjack-connector TestFlightSDK)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># each target can have optional blocks, eg. crafter will ask you if you want to include networking with a project</span>
</span><span class='line'>    <span class="n">add_option</span> <span class="ss">:networking</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">pods</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;AFNetworking&#39;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">add_option</span> <span class="ss">:coredata</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">pods</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;MagicalRecord&#39;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># each target can have shell scripts added, in this example we are adding my icon versioning script as in http://www.merowing.info/2013/03/overlaying-application-version-on-top-of-your-icon/</span>
</span><span class='line'>    <span class="n">scripts</span> <span class="o">&lt;&lt;</span> <span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;icon versioning&#39;</span><span class="p">,</span> <span class="ss">:script</span> <span class="o">=&gt;</span> <span class="no">Crafter</span><span class="o">.</span><span class="n">icon_versioning_script</span><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># we can also execute arbitrary ruby code when configuring our projects, here we rename all our standard icon* to icon_base for versioning script</span>
</span><span class='line'>    <span class="n">icon_rename</span> <span class="o">=</span> <span class="nb">proc</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
</span><span class='line'>      <span class="n">extension</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">extname</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span class='line'>      <span class="n">file_name</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">extension</span><span class="p">)</span>
</span><span class='line'>      <span class="no">File</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">_base</span><span class="si">#{</span><span class="n">extension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="no">Dir</span><span class="o">[</span><span class="s1">&#39;**/Icon.png&#39;</span><span class="o">].</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="n">icon_rename</span><span class="p">)</span>
</span><span class='line'>    <span class="no">Dir</span><span class="o">[</span><span class="s1">&#39;**/Icon@2x.png&#39;</span><span class="o">].</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="n">icon_rename</span><span class="p">)</span>
</span><span class='line'>    <span class="no">Dir</span><span class="o">[</span><span class="s1">&#39;**/Icon-72.png&#39;</span><span class="o">].</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="n">icon_rename</span><span class="p">)</span>
</span><span class='line'>    <span class="no">Dir</span><span class="o">[</span><span class="s1">&#39;**/Icon-72@2x.png&#39;</span><span class="o">].</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="n">icon_rename</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># more targets setup</span>
</span><span class='line'>  <span class="n">with</span> <span class="ss">:tests</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">add_option</span> <span class="ss">:kiwi</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">pods</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;Kiwi&#39;</span>
</span><span class='line'>      <span class="n">scripts</span> <span class="o">&lt;&lt;</span> <span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;command line unit tests&#39;</span><span class="p">,</span> <span class="ss">:script</span> <span class="o">=&gt;</span> <span class="no">Crafter</span><span class="o">.</span><span class="n">command_line_test_script</span><span class="p">}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure> </div> <p>As you can see the configuration files is quite easy, yet is pretty flexible. Once you set it up as you see fit, go to your project folder (the one with xcodeproj, workspace etc.) and call:</p> <div> <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>crafter
</span></code></pre></td></tr></table></div></figure> </div> <p>it will guide you through project setup, with default configuration it would look like this:</p> <div> <button class='toggle-code' title='show'>Show Code</button><figure class='code hide'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>1. sample
</span><span class='line'>2. sampleTests
</span><span class='line'>Which target should I use <span class="k">for </span>default?
</span><span class='line'>1
</span><span class='line'>1. sample
</span><span class='line'>2. sampleTests
</span><span class='line'>Which target should I use <span class="k">for </span>tests?
</span><span class='line'>2
</span><span class='line'><span class="k">do </span>you want to add networking? <span class="o">[</span>Yn<span class="o">]</span>
</span><span class='line'>n
</span><span class='line'><span class="k">do </span>you want to add coredata? <span class="o">[</span>Yn<span class="o">]</span>
</span><span class='line'>y
</span><span class='line'><span class="k">do </span>you want to add testing? <span class="o">[</span>Yn<span class="o">]</span>
</span><span class='line'>n
</span><span class='line'>duplicating configurations
</span><span class='line'>setting up variety of options
</span><span class='line'>preparing git ignore
</span><span class='line'>preparing pod file
</span><span class='line'>adding scripts
</span><span class='line'>Finished.
</span></code></pre></td></tr></table></div></figure> </div> <p>Now your project should have all options applied, generated Podfile (call pod install or set it up in your configuration).</p> <p>I&#8217;m learning Ruby, so I&#8217;m looking forward to pull requests on <a href="https://github.com/krzysztofzablocki/crafter">GitHub</a></p> <p>Send me your thoughts, I&#8217;m <a href="http://twitter.com/merowing_">merowing_ on twitter</a></p> <h4>Acknowledgements:</h4> <p><a href="http://theappbusiness.com">The App Business</a> (the company I work for) for supporting my idea and caring about work quality.</p> <p>to <a href="http://twitter.com/alloy">@alloy</a>, <a href="http://twitter.com/orta">@orta</a>, <a href="http://twitter.com/romainbriche">@romainbriche</a> - for taking some of their valuable time and sharing their thoughts about beta version.</p> <p>Inspired by <a href="https://github.com/thoughtbot/liftoff">liftoff</a></p> </div> </article> <div class="share"> <div class="addthis_sharing_toolbox"></div> <script type="text/javascript">
var addthis_share = addthis_share || {}
addthis_share = {
passthrough : {
twitter: {
via: "merowing_",
text: "Great article"
}
}
}
</script> <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script> <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-532368630eb37492" async></script> </div> </div> </div> <footer id="footer" class="inner">Copyright &copy; 2015 Krzysztof Zabłocki Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer> <script src="/javascripts/slash.js"></script> <script src="/javascripts/code-toggle.js"></script> <script src="/javascripts/jquery.fancybox.pack.js"></script> <script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-29400340-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();

		$('a').click(function() { 
			var $a = $(this); var href = $a.attr('href');
			// see if the link is external 
			if ( (href.match(/^http/)) && (! href.match(document.domain)) ) {

			// if so, register an event
			var category = 'outgoing'; // set this to whatever you want
			var event = 'click'; // set this to whatever you want
			var label = href; // set this to whatever you want
			pageTracker._trackEvent(category, event, href);
			}});
	</script> </div> </div> </body> </html>