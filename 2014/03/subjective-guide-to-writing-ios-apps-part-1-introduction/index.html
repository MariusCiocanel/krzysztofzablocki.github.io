<!DOCTYPE HTML> <html> <head> <meta charset="utf-8"> <title>Subjective guide to writing iOS Apps - Part 1 Introduction - Krzysztof Zabłocki</title> <meta name="author" content="Krzysztof Zabłocki"> <meta name=”twitter:site” content=”@merowing_> <meta name="description" content="Subjective guide to writing iOS Apps - Part 1 Introduction This will be subjective look at creating iOS app, first part will focus on basics like &hellip;"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link href="/atom.xml" rel="alternate" title="Krzysztof Zabłocki" type="application/atom+xml"> <link rel="canonical" href="http://krzysztofzablocki.github.com/krzysztofzablocki/2014/03/subjective-guide-to-writing-ios-apps-part-1-introduction"> <link href="/favicon.png" rel="shortcut icon"> <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css"> <link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css"> <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--> <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'> <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> <style type="text/css">
  .fancybox-wrap { position: fixed !important; }
  .fancybox-opened {
    -webkit-border-radius: 4px !important;
       -moz-border-radius: 4px !important;
            border-radius: 4px !important;
  }
  .fancybox-close, .fancybox-prev span, .fancybox-next span {
    background-color: transparent !important;
    border: 0 !important;
  }
</style> <script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-29400340-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();

		$('a').click(function() { 
			var $a = $(this); var href = $a.attr('href');
			// see if the link is external 
			if ( (href.match(/^http/)) && (! href.match(document.domain)) ) {

			// if so, register an event
			var category = 'outgoing'; // set this to whatever you want
			var event = 'click'; // set this to whatever you want
			var label = href; // set this to whatever you want
			pageTracker._trackEvent(category, event, href);
			}});
	</script> </head> <body> <div class="container"> <div class="left-col"> <div class="intrude-less"> <header id="header" class="inner"><div class="profilepic"> <script src="/javascripts/md5.js"></script> <script type="text/javascript">
		$(function(){
			$('.profilepic').append("<a href='http://twitter.com/merowing_'><img src='http://www.gravatar.com/avatar/" + MD5("krzysztof.zablocki@pixle.pl") + "?s=120' alt='Profile Picture' style='width: 120px; float: left; margin: 0px 15px 15px 0px;' /></a> <div class='header_bio'><a href='/about/''>Krzysztof Zabłocki - Software Engineer.</a></div>");
		});
	</script> </div> <nav id="main-nav"><ul class="main"> <br/> <br/> <div class="indie_apps" style="clear:both;"> <a href="http://appstore.com/foldify"><img class="app_poster" src="http://www.merowing.info/images/foldify.png" alt="Foldify"></a> <a href="http://appstore.com/foldifyzoo"><img class="app_poster" src="http://www.merowing.info/images/foldifyzoo.png" alt="Foldify Zoo"></a> <a href="http://appstore.com/foldifydino"><img class="app_poster" src="http://www.merowing.info/images/foldifydino.png" alt="Foldify Dino"></a> <a href="https://itunes.apple.com/us/app/storest-kids-love-playing/id926102013?mt=8"><img class="app_poster" src="http://www.merowing.info/images/storest.png" alt="Bord"></a> <a href="http://appstore.com/bord"><img class="app_poster" src="http://www.merowing.info/images/bord.png" alt="Storest"></a> <br/> <br/> </div> <li><a href="/about">About me</a></li> <li><a href="/speaking">Speaking</a></li> <li><a href="/">Blog</a></li> <li><a href="/blog/archives">Archives</a></li> </ul> </nav> <nav id="popular"> <section> <h4>Recommended</h4> <li class="related"><a href="/2014/10/how-do-i-work/">How do I Work?</a></li> <li class="related"><a href="/2014/03/refactoring-tricks">Refactoring tricks</a> and <a href="/2014/02/ios-developer-tools">Developer Tools</a></li> <li class="related"><a href="/2012/04/drawing-smooth-lines-with-cocos2d-ios-inspired-by-paper">Drawing smooth lines</a></li> <li class="related"><a href="https://github.com/krzysztofzablocki/KZPropertyMapper">Data Parsing</a> and <a href="https://github.com/krzysztofzablocki/KZBootstrap">Project bootstrap</a></li> </section> </nav> <nav id="sub-nav"> <div class="social"> <a class="email" href="mailto:krzysztof.zablocki@pixle.pl" title="Email">Email</a> <a class="facebook" href="http://www.facebook.com/100000315956630" title="Facebook">Facebook</a> <a class="twitter" href="http://twitter.com/merowing_" title="Twitter">Twitter</a> <a class="github" href="https://github.com/krzysztofzablocki" title="GitHub">GitHub</a> <a class="linkedin" href="http://www.linkedin.com/profile/view?id=90077810" title="LinkedIn">LinkedIn</a> <a class="rss" href="/atom.xml" title="RSS">RSS</a> </div> </nav></header> </div> </div> <div class="mid-col"> <div class="mid-col-container"> <div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <h1 class="title" itemprop="name">Subjective guide to writing iOS Apps - Part 1 Introduction</h1> <div class="entry-content" itemprop="articleBody"><p>This will be subjective look at creating iOS app, first part will focus on basics like project setup, folder structure, version control and some quality metrics.</p> <h2>Project setup</h2> <p>I usually start with empty project, then I use my <a href="http://github.com/krzysztofzablocki/crafter">crafter</a> gem to apply some default scripts and settings.</p> <h3>Settings</h3> <ol> <li>Copy release configuration as Adhoc</li> <li>Set debug configuration to use <ul> <li>DWARF without DSYM, unnecessary for debug and makes compilation faster</li> <li>Build Active Architecture Only - faster for debug</li> </ul> </li> <li>Enable lots of extra warnings, along with code analysis.</li> <li>Add my favourite pods <ul> <li><a href="https://github.com/CocoaLumberjack/CocoaLumberjack">Cocoa lumberjack</a></li> <li><a href="http://www.merowing.info/2013/07/expanded-use-of-asserts/">extended assertions</a></li> <li>Depending on architecture decision I might add <a href="https://github.com/krzysztofzablocki/KZPropertyMapper">KZPropertyMapper</a></li> <li>My KZDebug - to be released soon.</li> <li><a href="https://github.com/supermarin/ObjectiveSugar">Objective Sugar</a></li> <li><a href="https://github.com/allending/Kiwi">Kiwi</a></li> </ul> </li> </ol> <h4>Scripts</h4> <p>There is a set of scripts that I always use.</p> <ul> <li><a href="http://www.merowing.info/2013/03/overlaying-application-version-on-top-of-your-icon/">Icon versioning.</a></li> <li>Turning todos/hacks into warnings.</li> </ul> <div> <button class='toggle-code' title='show'>Show Code</button><figure class='code hide'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">KEYWORDS</span><span class="o">=</span><span class="s2">&quot;TODO:|FIXME:|\?\?\?:|\!\!\!:&quot;</span>
</span><span class='line'>find <span class="s2">&quot;${SRCROOT}&quot;</span> -name <span class="s2">&quot;*.h&quot;</span> -or -name <span class="s2">&quot;*.m&quot;</span> -print0 | xargs -0 egrep --with-filename --line-number --only-matching <span class="s2">&quot;($KEYWORDS).*\$&quot;</span> | perl -p -e <span class="s2">&quot;s/($KEYWORDS)/ warning: \$1/&quot;</span>
</span></code></pre></td></tr></table></div></figure> </div> <ul> <li>Generating warnings when files are longer than N lines.</li> </ul> <div> <button class='toggle-code' title='show'>Show Code</button><figure class='code hide'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>find <span class="s2">&quot;${SRCROOT}&quot;</span> <span class="se">\(</span> -name <span class="s2">&quot;*.h&quot;</span> -or -name <span class="s2">&quot;*.m&quot;</span> <span class="se">\)</span> -and <span class="se">\(</span> -path <span class="s2">&quot;${SRCROOT}/Pods/*&quot;</span> -prune -o -print0 <span class="se">\)</span> | xargs -0 wc -l | awk <span class="s1">&#39;$1 &gt; 250 &amp;&amp; $2 != &quot;total&quot; {for(i=2;i&lt;NF;i++){printf &quot;%s%s&quot;, $i, &quot; &quot;} print $NF &quot;:1: warning: File more than 250 lines (&quot; $1 &quot;), consider refactoring.&quot; }&#39;</span>
</span></code></pre></td></tr></table></div></figure> </div> <p>Most of my project also add other scripts, <a href="http://foldifyapp.com">Foldify</a> does pre-processing and post-processing steps.</p> <h2>Project structure</h2> <p>Let&#8217;s start with fact that I use <a href="http://cocoapods.org">CocoaPods</a> for managing dependencies(hate it or love it but @alloy and the team spend lots of their free time to make Cocoapods and you should at least respect that).</p> <p>Now there are 2 approaches I&#8217;d consider for setting up my project structure, whichever one I&#8217;d choose I&#8217;ll make sure that project grouping in Xcode matches the one on disk perfectly.</p> <h3>Classic organisation by role division</h3> <p><img src="http://merowing.info/uploads/2014/03/Folders1.png" width="295"></p> <p>This way we have separation between Our Code, Resources and Libs that we might use (sometimes Libs outside Cocoapods are needed).</p> <h4>Pro&#8217;s</h4> <ul> <li>Clear separation between file roles in project.</li> <li>All our code is under Classes folder, which makes it easy to run scripts and advanced code analyses (More on this later in the series).</li> </ul> <h4>Con&#8217;s</h4> <ul> <li>If you&#8217;d like to move part of the code to other project, is very likely you&#8217;ll need to go to move some Resources along with it.</li> <li>Keeping resources properly organised requires more work.</li> </ul> <h3>Composition / Modular approach</h3> <p>Other option would be to store code and resources together and group by Features / Modules. eg. if you are working on a widget based app that could make a lot of sense.</p> <p><img src="http://merowing.info/uploads/2014/03/Folders2.png" width="281"></p> <h4>Pro&#8217;s</h4> <ul> <li>Easy to keep resources and code organised</li> <li>Forces you think how to implement code so that it avoids dependency</li> <li>Very simple to reuse module in different project</li> </ul> <h4>Con&#8217;s</h4> <ul> <li>Resources and code will be close together, so no separation between roles of files</li> </ul> <h3>Which one to choose?</h3> <p>I like to think I&#8217;m a pragmatic programmer, I&#8217;ve used both approaches and believe it depends on the project and the architecture decision you&#8217;ll be making. #1 is more popular in general iOS apps, #2 makes a lot of sense for flexible architectures / frameworks etc.</p> <p>Try both and make a conscious choice for yourself, maybe hybrid approach makes more sense, Core of the app #1 and some modular part (Widgets?) as #2.</p> <h2>Source control, Code Reviews &amp; branching strategy</h2> <p>I&#8217;ve completely moved to git as dvcs, I even use it for important personal documents. Used mercurial before and it wasn&#8217;t bad, but most companies use git and I decided it&#8217;s more useful to master one, especially since git is more powerful.</p> <p>To make sure code quality is high my teams always use Code Reviews, depending on the size of the project team I&#8217;d say at least 2 reviewers have to accept changes. To be able to employ Code Reviews, one have to use proper branching strategy. I&#8217;ve tried few approaches and my favourite one is <a href="http://nvie.com/posts/a-successful-git-branching-model/">git-flow</a>, it works very well in big and small teams.</p> <h2>More quality please</h2> <p>Other techniques I use to make sure quality is good and project can have a long lifetime are:</p> <h4>BDD</h4> <p>I like to use <a href="https://github.com/allending/Kiwi">Kiwi</a> When writing tests you&#8217;ll probably need to simulate web-services, we don&#8217;t want to do real requests because tests should give us immediate feedback, <a href="https://github.com/AliSoftware/OHHTTPStubs">I use OHHTTPStubs to make that happen</a></p> <p>You can also add acceptance tests with something like <a href="https://github.com/kif-framework/KIF">KIF</a>, <a href="https://github.com/moredip/Frank">Frank</a> or <a href="http://calaba.sh/">Calabash</a>. Calabash has advantage as it&#8217;s multi-platform and backed by Xamarin.</p> <h4>Pair Programming</h4> <p>This is great technique for solving hard problems and working on the most important parts of your app, there is no point in pairing on UI layout, but when writing core architecture modules in your app there is a HUGE benefit from pairing.</p> <p>It&#8217;s like live code review, only you learn more from each other, and it doesn&#8217;t matter what level you are. Senior can still learn something new from Junior.</p> <p>If you are working remotely, like I&#8217;m currently, you can still do pair programming with services like <a href="http://screenhero.com/">Screenhero</a>.</p> <h4><a href="http://en.wikipedia.org/wiki/Object_composition">Composition</a></h4> <p>Whatever architecture choice I&#8217;ll select in next part of this series, I&#8217;ll defienietly use <a href="http://en.wikipedia.org/wiki/Object_composition">composition</a>, because it&#8217;s great pattern, it leads to cleaner code, smaller classes, makes it easier to test code and write it with <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> &amp;&amp; <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">SRP</a> principles in mind.</p> <h2>Up next</h2> <p>In next part of this series, I&#8217;ll get my hands dirty and look at creating actual code. I&#8217;ll be analyzing different architecture options and looking at libraries that can help us. I&#8217;ll take a swing at some design patterns and best field tested practices.</p> <p>Until then be sure to <a href="http://twitter.com/merowing_">follow me on twitter</a>.</p> </div> </article> <div class="share"> <div class="addthis_sharing_toolbox"></div> <script type="text/javascript">
var addthis_share = addthis_share || {}
addthis_share = {
passthrough : {
twitter: {
via: "merowing_",
text: "Great article"
}
}
}
</script> <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script> <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-532368630eb37492" async></script> </div> </div> </div> <footer id="footer" class="inner">Copyright &copy; 2015 Krzysztof Zabłocki Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer> <script src="/javascripts/slash.js"></script> <script src="/javascripts/code-toggle.js"></script> <script src="/javascripts/jquery.fancybox.pack.js"></script> <script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-29400340-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();

		$('a').click(function() { 
			var $a = $(this); var href = $a.attr('href');
			// see if the link is external 
			if ( (href.match(/^http/)) && (! href.match(document.domain)) ) {

			// if so, register an event
			var category = 'outgoing'; // set this to whatever you want
			var event = 'click'; // set this to whatever you want
			var label = href; // set this to whatever you want
			pageTracker._trackEvent(category, event, href);
			}});
	</script> </div> </div> </body> </html>